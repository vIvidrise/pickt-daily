# 실서비스 배포 분석 보고서

## 현황 요약

- **Git Push**: 성공 (af327ee)
- **실서비스 반영**: 안 됨 (위치 권한 모달, 행운 장소 미표시)

---

## 1. 프로젝트 구조

```
pickt-daily/          ← Git 저장소 루트
├── package.json      ← 최소 의존성만 있음 (build 스크립트 없음)
├── pickt-app/        ← 별도 앱
└── vivid-rise/       ← 실제 서비스 앱 (Fortune, FortuneResult 등)
    ├── package.json  ← "granite build" (= vite build)
    ├── index.html
    ├── src/
    └── dist/         ← 빌드 결과물
```

**핵심**: 실제 앱은 `vivid-rise/` 폴더에 있습니다.

---

## 2. 원인 분석

### Vercel Root Directory 설정 문제 (가능성 높음)

Vercel은 **저장소 루트**를 기준으로 빌드합니다. 현재 구조에서는:

| 설정 | 결과 |
|------|------|
| Root Directory = `.` (기본값) | pickt-daily 루트에서 빌드 시도 → `package.json`에 build 스크립트 없음 → **실패 또는 다른 앱 빌드** |
| Root Directory = `vivid-rise` | vivid-rise에서 `npm run build` → **올바른 앱 빌드** |

pickt-daily.vercel.app이 동작한다면, Vercel에서 **Root Directory**를 `vivid-rise`로 지정했을 가능성이 있습니다.  
이 경우에도 최신 push가 반영되지 않는다면 아래를 추가로 확인해야 합니다.

### 가능한 원인들

1. **Root Directory 미설정** → 루트에서 빌드, 잘못된 결과물 배포
2. **빌드 실패** → 이전 성공 빌드가 계속 노출
3. **배포 캐시** → CDN/브라우저 캐시로 예전 버전 제공
4. **배포 트리거 실패** → push가 Vercel에 전달되지 않음

---

## 3. 해결 방안

### 방안 A: vercel.json 추가 (권장)

저장소 루트에 `vercel.json`을 추가해 Root Directory를 고정합니다.

```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "installCommand": "npm install",
  "framework": null,
  "rootDirectory": "vivid-rise"
}
```

### 방안 B: Vercel 대시보드에서 수동 설정

1. [vercel.com](https://vercel.com) → pickt-daily 프로젝트
2. **Settings** → **Build & Development**
3. **Root Directory** → `vivid-rise` 입력
4. **Save** 후 **Deployments** → 최신 배포 **Redeploy**

### 방안 C: 로컬에서 Vercel CLI로 직접 배포

```bash
cd vivid-rise
npx vercel --prod
```

Git과 상관없이 vivid-rise 폴더를 그대로 배포합니다.

---

## 4. 확인 체크리스트

1. **Vercel Deployments** 탭에서 최근 push 이후 새 배포가 생성되었는지 확인
2. 배포 상태가 **Ready**인지 확인
3. 배포 상세에서 **Build Logs**에 에러가 없는지 확인
4. **Root Directory**가 `vivid-rise`로 설정되어 있는지 확인

---

## 5. 다음 단계

1. `vercel.json` 추가 후 `git add`, `git commit`, `git push`
2. Vercel에서 새 배포가 성공했는지 확인
3. pickt-daily.vercel.app 시크릿 모드로 접속해 변경 사항 확인
