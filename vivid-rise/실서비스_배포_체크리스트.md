# 실서비스 배포 체크리스트

변경사항(9개 지역, 지도·길찾기 연동, 운세 UI 등)을 **실제 앱 서비스**에 반영하려면 아래 중 사용하는 방식만 진행하세요.

---

## ★ pickt-daily.vercel.app 주소 유지하면서 배포 (한 번에 복사용)

아래 명령어를 **순서대로** 터미널에 붙여 넣어 실행하세요. 주소 **https://pickt-daily.vercel.app/** 이 그대로 유지됩니다.

```bash
cd /Users/ad/Desktop/pickt-daily/vivid-rise
rm -rf .vercel
npx vercel --prod
```

- **Link to existing project?** → **N** 입력 후 엔터  
- **What's your project's name?** → **pickt-daily** 입력 후 엔터  
- 나머지 질문은 엔터로 넘기면 됩니다.

배포가 끝나면 **https://pickt-daily.vercel.app** 에 바로 반영됩니다.

---

## A. 웹 서비스 (Vercel — pickt-daily.vercel.app)

### A-1. Vercel CLI로 배포 (Git 원격 주소 안 바꿀 때, 추천)

원격(origin) 설정을 건드리지 않고, 로컬에서 바로 배포하는 방법입니다.

1. **Vercel CLI 설치** (한 번만)
   ```bash
   npm install -g vercel
   ```

2. **vivid-rise 폴더로 이동**
   ```bash
   cd /Users/ad/Desktop/pickt-daily/vivid-rise
   ```

3. **배포 실행**
   ```bash
   vercel --prod
   ```
   - 처음이면 로그인 안내 나옵니다. 브라우저에서 로그인하면 됩니다.
   - "Link to existing project?" → **Yes** 선택 후 `pickt-daily`(또는 현재 쓰는 프로젝트 이름) 선택.
   - "Set up and deploy?" → 설정은 이미 `vercel.json`에 있으므로 **Yes** 하면 됩니다.
   - 빌드가 끝나면 실서비스 URL(예: https://pickt-daily.vercel.app)에 반영됩니다.

이후 코드 수정했을 때마다 `vercel --prod`만 다시 실행하면 됩니다. **git push는 하지 않아도 됩니다.**

**에러가 날 때:**

- **"Git author ... must have access to the team vividrise's projects"**  
  → 지금 로그인한 계정이 팀 **vividrise** 배포 권한이 없을 때 나옵니다.  
  - **"The specified scope does not exist"**  
    → `--scope vividrise`(또는 넣은 값)가 Vercel에 없을 때 나옵니다. **scope 없이** 배포하세요 (아래 "scope 없이 배포" 참고).
  - **방법 1 (scope 없이 배포, 추천):** 현재 로그인한 계정으로 배포하려면 `.vercel` 연결을 끊고 다시 묻게 한 뒤 배포하세요.  
    ```bash
    cd /Users/ad/Desktop/pickt-daily/vivid-rise
    rm -rf .vercel
    npx vercel --prod
    ```  
    - "Link to existing project?" → **N**  
    - "What's your project's name?" → **pickt-daily** (또는 원하는 이름)  
    - 끝나면 나오는 URL(예: pickt-daily-xxx.vercel.app)이 실서비스 주소입니다. 기존 pickt-daily.vercel.app 도메인을 쓰려면 Vercel 대시보드에서 이 프로젝트에 도메인 추가하면 됩니다.
  - **방법 1-2 (팀 scope가 있을 때만):** 팀 이름이 정확히 있을 때만 `--scope 팀이름` 사용.  
  - **방법 1-3 (개인 계정 사용자명으로):** 본인 Vercel 사용자명을 알고 있으면 `--scope 본인사용자명` 사용.  
    ```bash
    npx vercel --prod --yes --scope 본인Vercel사용자명
    ```  
    (예: 사용자명이 `ad`면 `--scope ad`)  
    처음이면 "Link to existing project?"에서 **No**로 새 프로젝트로 만들거나, 본인 계정에 있는 기존 프로젝트를 고르면 됩니다.  
  - **방법 2 (팀으로 배포 유지):** Vercel 대시보드에서 팀 **vividrise** 관리자에게 요청해, 본인 계정을 팀에 초대하고 **배포 권한**을 받으세요.  
    [Vercel 팀 협업 문서](https://vercel.com/docs/deployments/troubleshoot-project-collaboration)

- **"vercel.json file should be inside of the provided root directory"**  
  → Vercel이 인식하는 프로젝트 루트와 `vercel.json` 위치가 어긋날 때 나옵니다.  
  - **배포는 반드시 `vivid-rise` 폴더에서** 실행하세요: `cd /Users/ad/Desktop/pickt-daily/vivid-rise` 후 `npx vercel --prod --yes`.  
  - 이미 연결된 프로젝트가 **저장소 루트(pickt-daily)** 기준이라면, Vercel 대시보드 → 해당 프로젝트 → **Settings → General → Root Directory**를 `vivid-rise`로 설정한 뒤 다시 배포하세요.

---

### A-2. Git push로 배포 (원격이 정상일 때)

1. **vivid-rise로 이동**
   ```bash
   cd vivid-rise
   ```

2. **빌드 확인** (선택)
   ```bash
   npm install --legacy-peer-deps
   npm run build
   ```

3. **Git push로 배포**
   ```bash
   git add .
   git commit -m "지역 9개, 지도·길찾기 연동, 운세 UI 반영"
   git push origin main
   ```
   (브랜치가 다르면 해당 브랜치로 push)

4. Vercel이 자동으로 빌드·배포합니다.

---

## B. 앱인토스 (토스 미니앱)

1. **vivid-rise로 이동**
   ```bash
   cd vivid-rise
   ```

2. **의존성 설치**
   ```bash
   npm install --legacy-peer-deps
   ```

3. **.ait 빌드**
   ```bash
   npm run build
   ```
   프로젝트 루트에 `pickt-daily.ait` (또는 `*.ait`) 파일이 생성되는지 확인.

4. **앱인토스 콘솔 업로드**
   - https://developers-apps-in-toss.toss.im/ 로그인
   - 해당 앱 선택 → **앱 번들 업로드**
   - 생성한 **.ait** 파일 선택 후 업로드
   - 검토 요청 → 승인 후 **출시하기**

자세한 단계는 `앱인토스_ait_빌드_업로드_절차.md` 참고.

---

## 요약

| 서비스     | 적용 방법                    |
|------------|-----------------------------|
| 웹 (Vercel) | `git push` → 자동 배포      |
| 앱인토스   | `npm run build` → .ait 업로드 |

두 서비스 모두 **vivid-rise** 코드를 빌드해 사용하므로, 위 순서대로 하시면 실서비스에 반영됩니다.
